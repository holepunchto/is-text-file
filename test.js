'use strict'
const test = require('brittle')
const isTextFile = require('.')

test('True heuristic', function (t) {
  t.ok(isTextFile('foobar.txt'))
  t.ok(isTextFile('readme.md'))
  t.ok(isTextFile('README.MD'))
  t.ok(isTextFile('.gitignore'))
  t.ok(isTextFile('/tmp/.gitignore'))
  t.ok(isTextFile('/tmp/index.js'))
  t.ok(isTextFile('C:\\tmp\\readme.txt'))
  t.ok(isTextFile('.GITIGNORE'))
  t.ok(isTextFile('Dockerfile'))
  t.ok(isTextFile('makefile'))
  t.ok(isTextFile(' README.md '))
  t.ok(isTextFile('/tmp/abc/Makefile'))
  t.ok(isTextFile('C:\\tmp\\abc\\Makefile'))
  t.ok(isTextFile('pear://runtime/foo.txt'))
  t.ok(isTextFile('pear://runtime/path/Makefile'))
  t.ok(isTextFile('pear://runtime/path/.env'))
  t.ok(isTextFile('file:///usr/local/README.md'))
})

test('False heuristic', function (t) {
  t.ok(!isTextFile('foobar.png'))
  t.ok(!isTextFile('a.pdf'))
  t.ok(!isTextFile('archive.tar.gz'))
  t.ok(!isTextFile('file.'))
  t.ok(!isTextFile('bin'))
  t.ok(!isTextFile('foobar'))
  t.ok(!isTextFile('C:\\tmp\\foobar.png'))
  t.ok(!isTextFile('.git'))
  t.ok(!isTextFile('/tmp/.git'))
  t.ok(!isTextFile('pear://runtime/foo.png'))
  t.ok(!isTextFile('pear://runtime/binwalk'))
  t.ok(!isTextFile('file:///usr/local/archive.tar.gz'))
  t.ok(!isTextFile(''))
  t.ok(!isTextFile(undefined))
  t.ok(!isTextFile(null))
})
